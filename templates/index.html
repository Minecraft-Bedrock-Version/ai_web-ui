<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI κΈ°λ°μ μΈν”„λΌ λ° μκ²© μ¦λ… λ³€κ²½ ν†µμ </title>
    <link rel="stylesheet" href="../static/css/main.css">
</head>
<body>
    <!-- Header -->
    <div class="header">
        <svg class="header-icon" fill="currentColor" viewBox="0 0 24 24">
            <!-- ---<path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/> -->
            <img src="../static/img/logo.webp" alt="logo" height="30" width="30" />
        </svg>
        <h1>Minecraft Bedrock Version</h1>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Progress Steps -->
        <div class="card">
            <div class="progress-container" id="progressSteps">
                <!-- Populated by JavaScript -->
            </div>
        </div>

        <!-- Content Area -->
        <div class="card content-area">
            <!-- Step 0: User Configuration -->
            <div class="step-content-wrapper active" id="step-0">
                <h2 class="section-title">μΈν”„λΌ κµ¬μ„± μ„¤μ •</h2>
                <p class="section-description">μƒλ΅ μƒμ„±ν•  μΈν”„λΌμ μ„¤μ •μ„ μ…λ ¥ν•΄μ£Όμ„Έμ”</p>

                <div class="form-group">
                    <label class="form-label" for="region">AWS λ¦¬μ „</label>
                    <select class="form-select" id="region">
                        <option value="">λ¦¬μ „μ„ μ„ νƒν•μ„Έμ”</option>
                        <option value="us-east-1">US East (N. Virginia)</option>
                        <option value="us-west-2">US West (Oregon)</option>
                        <option value="ap-northeast-2">Asia Pacific (Seoul)</option>
                        <option value="ap-northeast-1">Asia Pacific (Tokyo)</option>
                        <option value="eu-west-1">Europe (Ireland)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label" for="infrastructureType">μΈν”„λΌ νƒ€μ…</label>
                    <select class="form-select" id="infrastructureType">
                        <option value="">μΈν”„λΌ νƒ€μ…μ„ μ„ νƒν•μ„Έμ”</option>
                        <option value="ec2">EC2 Instance</option>
                        <option value="lambda">Lambda Function</option>
                        <option value="rds">RDS Database</option>
                        <option value="s3">S3 Bucket</option>
                        <option value="ecs">ECS Container</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label" for="description">μΈν”„λΌ μ„¤λ…</label>
                    <textarea class="form-textarea" id="description" rows="4" placeholder="μƒμ„±ν•λ ¤λ” μΈν”„λΌμ— λ€ν• μ„¤λ…μ„ μ…λ ¥ν•μ„Έμ”..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label" for="iamCredentials">IAM μκ²© μ¦λ… ARN</label>
                    <input class="form-input" type="text" id="iamCredentials" placeholder="arn:aws:iam::123456789012:user/username">
                    <p class="form-hint">μ‚¬μ©μμ IAM μκ²© μ¦λ…μ„ μ…λ ¥ν•μ„Έμ”</p>
                </div>
            </div>

            <!-- Step 1: CLI Generation -->
            <div class="step-content-wrapper" id="step-1">
                <h2 class="section-title">AI κΈ°λ° CLI μƒμ„±</h2>
                <p class="section-description">AIκ°€ μ…λ ¥λ μ„¤μ •μ„ κΈ°λ°μΌλ΅ IAM μ •μ±…κ³Ό CLI λ…λ Ήμ–΄λ¥Ό μƒμ„±ν•©λ‹λ‹¤.</p>

                <div class="generate-container" id="generateContainer">
                    <div style="text-align: center;">
                        <p style="font-size: 18px; margin-bottom: 8px;">AIλ¥Ό μ‚¬μ©ν•μ—¬ λ³΄μ• μ •μ±…κ³Ό CLI λ…λ Ήμ–΄λ¥Ό μλ™ μƒμ„±ν•©λ‹λ‹¤</p>
                        <p class="form-hint">μƒμ„±λ λ…λ Ήμ–΄λ” κ²€ν†  ν›„ μμ •ν•  μ μμµλ‹λ‹¤</p>
                    </div>
                    <button class="btn btn-primary btn-lg" onclick="generateCLI()" id="generateBtn">
                        CLI μƒμ„±ν•κΈ°
                    </button>
                </div>

                <div class="generated-content" id="generatedContent">
                    <div style="display: flex; align-items: center; gap: 8px; color: #16a34a; margin-bottom: 16px;">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                        <span style="font-weight: 500;">AI μƒμ„± μ™„λ£</span>
                    </div>

                    <div style="background: #F9FAFB; padding: 16px; border-radius: 8px; margin-bottom: 16px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                            <h3 style="font-weight: 600;">μƒμ„±λ IAM μ •μ±… (JSON)</h3>
                            <span class="badge badge-secondary">AI μƒμ„±</span>
                        </div>
                        <pre class="code-block" id="generatedJSON"></pre>
                    </div>

                    <div style="background: #F9FAFB; padding: 16px; border-radius: 8px; margin-bottom: 16px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                            <h3 style="font-weight: 600;">μƒμ„±λ CLI λ…λ Ήμ–΄</h3>
                            <span class="badge badge-secondary">AI μƒμ„±</span>
                        </div>
                        <pre class="code-block" id="generatedCLI"></pre>
                    </div>

                    <div style="text-align: right;">
                        <button class="btn btn-secondary" onclick="regenerateCLI()">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                            </svg>
                            μ¬μƒμ„±
                        </button>
                    </div>
                </div>
            </div>

            <!-- Step 2: Vulnerability Analysis -->
            <div class="step-content-wrapper" id="step-2">
                <h2 class="section-title">μ·¨μ•½μ  λ¶„μ„</h2>
                <p class="section-description">AIκ°€ Attack Graphλ¥Ό μƒμ„±ν•μ—¬ μ μ¬μ  λ³΄μ• μ„ν—μ„ λ¶„μ„ν•©λ‹λ‹¤.</p>

                    <!-- π”¥ μ¶”κ°€λ λ²„νΌ -->
   <div id="analysisButtonWrapper" style="display: flex; justify-content: center; align-items: center; min-height: 200px;">
    <button class="btn btn-primary btn-lg" onclick="runAnalysis()">
        μ·¨μ•½μ  λ¶„μ„
    </button>
</div>

                <div id="analysisProgress" class="hidden">
                    <div class="card" style="padding: 24px; background: #F9FAFB;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                            <svg width="24" height="24" fill="#FF9900" viewBox="0 0 24 24" class="spinner">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" opacity="0.3"/>
                                <path d="M12 2v4c3.31 0 6 2.69 6 6h4c0-5.52-4.48-10-10-10z"/>
                            </svg>
                            <div>
                                <h3 style="font-weight: 600; margin-bottom: 4px;">Attack Graph μƒμ„± μ¤‘...</h3>
                                <p style="font-size: 14px; color: #6B7280;">κΈ°μ΅΄ μΈν”„λΌμ™€ μƒ λ¦¬μ†μ¤ κ°„μ κ³µκ²© κ²½λ΅λ¥Ό λ¶„μ„ν•κ³  μμµλ‹λ‹¤</p>
                            </div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-bar-fill" id="analysisProgressBar" style="width: 0%"></div>
                        </div>
                        <p style="text-align: center; font-size: 13px; color: #6B7280; margin-top: 8px;" id="progressText">0% μ™„λ£</p>
                    </div>
                </div>

                <div id="analysisResults" class="hidden">
                    <div class="alert alert-info">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                        <div>
                            <p style="font-weight: 500; margin-bottom: 4px;">λ¶„μ„ μ™„λ£</p>
                            <p style="font-size: 14px;">μ΄ 3κ°μ μ μ¬μ  μ·¨μ•½μ μ΄ λ°κ²¬λμ—μµλ‹λ‹¤</p>
                        </div>
                    </div>

                    <div id="vulnerabilityList"></div>
                </div>
            </div>

            <!-- Step 3: Execution -->
            <div class="step-content-wrapper" id="step-3">
                <h2 class="section-title">μ‹¤ν–‰</h2>
                <p class="section-description">μƒμ„±λ CLI λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•κ³  λ³΄μ• λ¨λ‹ν„°λ§μ„ μ§„ν–‰ν•©λ‹λ‹¤.</p>

                <div class="alert alert-info">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/>
                    </svg>
                    <div>
                        <p><strong>λ³΄μ• ν”„λ΅μ„Έμ¤:</strong> μ„μ‹ IAM μκ²© μ¦λ…μ΄ μƒμ„±λκ³ , AIκ°€ μƒμ„±ν–μμ„ λ΅κΉ…ν•©λ‹λ‹¤. 
                        λ¦¬μ†μ¤ μƒμ„± ν›„ CloudTrail λ΅κ·Έλ¥Ό κ²€μ¦ν•μ—¬ λΉ„μ •μƒμ μΈ ν™λ™μ„ νƒμ§€ν•κ³ , μ‘μ—… μ™„λ£ ν›„ μ„μ‹ μκ²© μ¦λ…μ„ μλ™μΌλ΅ μ‚­μ ν•©λ‹λ‹¤.</p>
                    </div>
                </div>

                <div id="executionIdle">
                    <div class="generate-container">
                        <svg width="64" height="64" fill="#9CA3AF" viewBox="0 0 24 24">
                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                        </svg>
                        <div style="text-align: center;">
                            <p style="font-size: 18px; font-weight: 500; margin-bottom: 8px;">μ‹¤ν–‰ μ¤€λΉ„ μ™„λ£</p>
                            <p style="font-size: 14px; color: #6B7280;">μ•„λ λ²„νΌμ„ ν΄λ¦­ν•μ—¬ λ³΄μ• ν”„λ΅μ„Έμ¤λ¥Ό μ‹μ‘ν•μ„Έμ”</p>
                        </div>
                        <button class="btn btn-primary btn-lg" onclick="executeProcess()">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                            μ‹¤ν–‰ν•κΈ°
                        </button>
                    </div>
                </div>

                <div id="executionSteps" class="hidden">
                    <div class="card" style="padding: 16px; margin-bottom: 16px;" id="stepsContainer">
                        <!-- Populated by JavaScript -->
                    </div>

                    <div class="alert alert-success hidden" id="executionComplete">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                        <div>
                            <p><strong>μ‹¤ν–‰ μ™„λ£:</strong> λ¨λ“  λ³΄μ• ν”„λ΅μ„Έμ¤κ°€ μ„±κ³µμ μΌλ΅ μ™„λ£λμ—μµλ‹λ‹¤. 
                            μ„μ‹ IAM μκ²© μ¦λ…μ€ μ•μ „ν•κ² μ‚­μ λμ—μΌλ©°, λ¨λ“  ν™λ™μ΄ λ΅κΉ…λμ—μµλ‹λ‹¤.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 4: Logging -->
            <div class="step-content-wrapper" id="step-4">
                <h2 class="section-title">λ΅κΉ… λ° λ¨λ‹ν„°λ§</h2>
                <p class="section-description">λ¨λ“  ν™λ™μ΄ κΈ°λ΅λκ³  CloudTrail λ΅κ·Έμ™€ λΉ„κµ κ²€μ¦λ©λ‹λ‹¤.</p>

                <div class="stats-grid">
                    <div class="card stat-card">
                        <div class="stat-icon blue">
                            <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                            </svg>
                        </div>
                        <div>
                            <p style="font-size: 13px; color: #6B7280;">μ΄ ν™λ™</p>
                            <p style="font-size: 28px; font-weight: 600;">4</p>
                        </div>
                    </div>

                    <div class="card stat-card">
                        <div class="stat-icon green">
                            <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                        </div>
                        <div>
                            <p style="font-size: 13px; color: #6B7280;">κ²€μ¦ μ™„λ£</p>
                            <p style="font-size: 28px; font-weight: 600;">4</p>
                        </div>
                    </div>

                    <div class="card stat-card">
                        <div class="stat-icon orange">
                            <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/>
                            </svg>
                        </div>
                        <div>
                            <p style="font-size: 13px; color: #6B7280;">λ³΄μ• κ²½κ³ </p>
                            <p style="font-size: 28px; font-weight: 600;">0</p>
                        </div>
                    </div>
                </div>

                <div class="tabs">
                    <div class="tab-list">
                        <button class="tab-button active" onclick="switchTab('ai-logs')">AI λ΅κ·Έ</button>
                        <button class="tab-button" onclick="switchTab('cloudtrail')">CloudTrail</button>
                        <button class="tab-button" onclick="switchTab('alerts')">λ³΄μ• μ•λ¦Ό</button>
                    </div>

                    <div class="tab-content active" id="tab-ai-logs">
                        <div class="card">
                            <div class="scroll-area" id="aiLogsContent">
                                <!-- Populated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <div class="tab-content" id="tab-cloudtrail">
                        <div class="card">
                            <div class="scroll-area" id="cloudtrailContent">
                                <!-- Populated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <div class="tab-content" id="tab-alerts">
                        <div class="card" style="padding: 16px;" id="alertsContent">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="navigation">
            <button class="btn btn-secondary btn-lg" id="prevBtn" onclick="previousStep()">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                </svg>
                μ΄μ „
            </button>
            <button class="btn btn-primary btn-lg" id="nextBtn" onclick="nextStep()">
                λ‹¤μ
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
                </svg>
            </button>
        </div>
    </div>

    <script src="../static/js/main.js">
    </script>
</body>
</html>
